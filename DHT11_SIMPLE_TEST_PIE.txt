// This #include statement was automatically added by the Particle IDE.
#include <PietteTech_DHT.h>

// system defines
#define DHTPIN D2     // what pin we're connected to -- D0 does NOT work!

#define DHTTYPE DHT11		// DHT 11 
#define DHT_SAMPLE_INTERVAL   4000  // Sample every two seconds


PietteTech_DHT dht(DHTPIN, DHTTYPE);

void setup() {
    Particle.publish("Test program for DHT11 using Piettech library and blocking delay");
}


void loop() {

// Wait a few seconds between measurements.
	delay(DHT_SAMPLE_INTERVAL);
    Particle.publish("Taking another sample!");
    dht.acquireAndWait();  //blocking call to measure
    
	float h = dht.getHumidity();
	float f = dht.getFahrenheit();
  
    Particle.publish("Got a reading from the sensor");

    Particle.publish("Humidity (%): " + String(h));
    Particle.publish(" Temp (F):" + String(f));

}

